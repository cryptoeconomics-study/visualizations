(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{15:function(e,t,n){function o(e){return(o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){return(r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function a(e,t){return!t||"object"!==o(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.getPrototypeOf||function(e){return e.__proto__})(e)}for(var c=n(135),u=n(360),l=function(e){function t(e,n,o){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=a(this,s(t).call(this,e,n,o))).pausedSpending=!0,r}var n,o,c;return n=t,(o=[{key:"getRandomReceiver",value:function(){var e=this,t=y.filter(function(t){return t.wallet.address!==e.wallet.address});return t[Math.floor(Math.random()*t.length)].wallet.address}},{key:"tick",value:function(){if(!(this.state[this.wallet.address].balance<10||this.pausedSpending)&&Math.random()<.01){var e=this.generateTx(this.getRandomReceiver(),10);this.transactions.push(e),this.applyTransaction(e),this.network.broadcast(this.pid,e)}}}])&&i(n.prototype,o),c&&i(n,c),function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");r(e.prototype,t&&t.prototype),t&&r(e,t)}(t,e),t}(n(349).Node),f=[],h={},d=new u(15,0),p=0;p<4;p++)f.push(c.createIdentity()),h[f[p].address]={balance:100,nonce:0};for(var y=[],g=0;g<4;g++)y.push(new l(f[g],JSON.parse(JSON.stringify(h)),d)),d.connectPeer(y[g],2);e.exports={nodes:y,network:d}},218:function(e,t,n){"use strict";n.r(t);var o=n(1),r=n.n(o),i=n(43),a=n.n(i),s=(n(473),n(472),n(69)),c=n(44),u=n(2),l=n(210),f={SYMBOLS:{CIRCLE:"circle",CROSS:"cross",DIAMOND:"diamond",SQUARE:"square",STAR:"star",TRIANGLE:"triangle",WYE:"wye"}};function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(t){h(e,t,n[t])})}return e}({COORDS_SEPARATOR:",",FORCE_IDEAL_STRENGTH:-1e3,FORCE_X:.06,FORCE_Y:.06,GRAPH_CONTAINER_ID:"graph-container-zoomable",GRAPH_WRAPPER_ID:"graph-wrapper",KEYWORDS:{SAME:"SAME"},LINK_CLASS_NAME:"link",NODE_CLASS_NAME:"node"},f),p={automaticRearrangeAfterDropNode:!1,height:1e3,highlightDegree:1,highlightOpacity:1,linkHighlightBehavior:!1,maxZoom:8,minZoom:1,nodeHighlightBehavior:!1,panAndZoom:!1,staticGraph:!1,width:1e3,node:{color:"#d3d3d3",fontColor:"black",fontSize:8,fontWeight:"normal",highlightColor:"SAME",highlightFontSize:8,highlightFontWeight:"normal",highlightStrokeColor:"SAME",highlightStrokeWidth:1.5,labelProperty:"id",mouseCursor:"pointer",opacity:1,renderLabel:!0,size:200,strokeColor:"none",strokeWidth:1.5,svg:"",symbolType:"circle"},link:{color:"#000000",opacity:1,semanticStrokeWidth:!1,strokeWidth:1.5,highlightColor:"#d3d3d3"}},y={GRAPH_NO_ID_PROP:"id prop not defined! id property is mandatory and it should be unique.",INVALID_LINKS:"you provided a invalid links data structure. Links source and target attributes must point to an existent node",INSUFFICIENT_DATA:"you have not provided enough data for react-d3-graph to render something. You need to provide at least one node"};function g(e){return(g="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function v(e,t){return!t||"object"!==g(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function k(e){return(k=Object.getPrototypeOf||function(e){return e.__proto__})(e)}var O=function(e){function t(){var e,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return v(o,(n=o=v(this,(e=k(t)).call.apply(e,[this].concat(i))),o.handleOnMouseOverLink=function(){return o.props.onMouseOverLink&&o.props.onMouseOverLink(o.props.source,o.props.target)},o.handleOnMouseOutLink=function(){return o.props.onMouseOutLink&&o.props.onMouseOutLink(o.props.source,o.props.target)},n))}var n,o,i;return n=t,(o=[{key:"render",value:function(){var e={strokeWidth:this.props.strokeWidth,stroke:this.props.stroke,opacity:this.props.opacity},t={className:this.props.className,onClick:this.handleOnClickLink,onMouseOut:this.handleOnMouseOutLink,onMouseOver:this.handleOnMouseOverLink,style:e,x1:this.props.x1,x2:this.props.x2,y1:this.props.y1,y2:this.props.y2};return r.a.createElement("line",t)}}])&&m(n.prototype,o),i&&m(n,i),function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");b(e.prototype,t&&t.prototype),t&&b(e,t)}(t,e),t}(r.a.Component);function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var w=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(t){S(e,t,n[t])})}return e}({ARC:{START_ANGLE:0,END_ANGLE:2*Math.PI},DEFAULT_NODE_SIZE:p.node.size,NODE_LABEL_DX:".90em",NODE_LABEL_DY:".35em"},f),E=n(26);var _={buildSvgSymbol:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w.DEFAULT_NODE_SIZE,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:w.SYMBOLS.CIRCLE;return Object(E.a)().size(function(){return e}).type(function(){return function(e){switch(e){case w.SYMBOLS.CIRCLE:return E.b;case w.SYMBOLS.CROSS:return E.c;case w.SYMBOLS.DIAMOND:return E.d;case w.SYMBOLS.SQUARE:return E.e;case w.SYMBOLS.STAR:return E.f;case w.SYMBOLS.TRIANGLE:return E.g;case w.SYMBOLS.WYE:return E.h;default:return E.b}}(t)})()}};function N(e){return(N="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function T(e,t){return(T=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function j(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function C(e,t){return!t||"object"!==N(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function x(e){return(x=Object.getPrototypeOf||function(e){return e.__proto__})(e)}var P=function(e){function t(){var e,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return C(o,(n=o=C(this,(e=x(t)).call.apply(e,[this].concat(i))),o.handleOnClickNode=function(){return o.props.onClickNode&&o.props.onClickNode(o.props.id)},o.handleOnMouseOverNode=function(){return o.props.onMouseOverNode&&o.props.onMouseOverNode(o.props.id)},o.handleOnMouseOutNode=function(){return o.props.onMouseOut&&o.props.onMouseOut(o.props.id)},n))}var n,o,i;return n=t,(o=[{key:"render",value:function(){var e,t,n,o={cursor:this.props.cursor,onClick:this.handleOnClickNode,onMouseOut:this.handleOnMouseOutNode,onMouseOver:this.handleOnMouseOverNode,opacity:this.props.opacity},i={dx:this.props.dx||w.NODE_LABEL_DX,dy:w.NODE_LABEL_DY,fill:this.props.fontColor,fontSize:this.props.fontSize,fontWeight:this.props.fontWeight,opacity:this.props.opacity},a=this.props.size,s=this.props.cx,c=this.props.cy;if(this.props.svg){var u=a/10,l=a/10,f=l/2,h=u/2,d="translate(".concat(f,",").concat(h,")");e=r.a.createElement("text",Object.assign({},i,{transform:d}),this.props.label),t=r.a.createElement("image",Object.assign({},o,{href:this.props.svg,width:l,height:u})),s-=f,c-=h}else{if(this.props.gerbil){var p=a/27,y=a/27,g=y/2,b=p/2,m="translate(".concat(g,",").concat(b,")");e=r.a.createElement("text",Object.assign({},i,{transform:m}),this.props.label),n=r.a.createElement("g",{transform:"translate("+-g+","+-b+")"},r.a.createElement("image",Object.assign({},o,{href:this.props.gerbil,width:y,height:p})))}o.d=_.buildSvgSymbol(a,this.props.type),o.fill=this.props.fill,o.stroke=this.props.stroke,o.strokeWidth=this.props.strokeWidth,e=r.a.createElement("text",i,this.props.label),t=r.a.createElement("path",o)}var v={className:this.props.className,cx:this.props.cx,cy:this.props.cy,id:this.props.id,transform:"translate(".concat(s,",").concat(c,")")};return r.a.createElement("g",v,t,this.props.renderLabel&&e,n)}}])&&j(n.prototype,o),i&&j(n,i),function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");T(e.prototype,t&&t.prototype),t&&T(e,t)}(t,e),t}(r.a.Component);function M(e){return(M="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var L=20;function A(e,t){return e.hasOwnProperty(t)&&"object"===M(e[t])&&null!==e[t]&&!R(e[t])}function R(e){return!!e&&"object"===M(e)&&!Object.keys(e).length}var D={isDeepEqual:function e(t,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=[];if(0===o&&t===n)return!0;if(R(t)&&!R(n)||!R(t)&&R(n))return!1;var i=Object.keys(t),a=Object.keys(n);if(i.length!==a.length)return!1;for(var s=0;s<i.length;s++){var c=i[s];if(A(t,c)&&A(n,c)&&o<L)r.push(e(t[c],n[c],o+1));else{var u=R(t[c])&&R(n[c])||n.hasOwnProperty(c)&&n[c]===t[c];if(r.push(u),!u)break}}return-1===r.indexOf(!1)},isObjectEmpty:R,merge:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r={};if(0===Object.keys(t||{}).length)return n&&!R(n)?n:{};for(var i=Object.keys(t),a=0;a<i.length;a++){var s=i[a];n[s]&&"object"===M(n[s])&&"object"===M(t[s])&&o<L?function(){var i=e(t[s],n[s],o+1);r[s]=t[s].hasOwnProperty("length")&&n[s].hasOwnProperty("length")?Object.keys(i).map(function(e){return i[e]}):i}():r[s]=n.hasOwnProperty(s)?n[s]:t[s]}return r},pick:function(e,t){return Object.keys(e).reduce(function(n,o){return e.hasOwnProperty(o)&&t.includes(o)&&(n[o]=e[o]),n},{})},throwErr:function(e,t){var n="react-d3-graph :: ".concat(e," :: ").concat(t);throw Error(n)}};function I(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var W=["id","highlighted","x","y","index","vy","vx"];function G(e,t,n,o){var r=e.highlighted||e.id===(n&&n.source)||e.id===(n&&n.target),i=!!(t||n&&n.source&&n.target);return i&&0===o.highlightDegree?r?o.node.opacity:o.highlightOpacity:i?r?o.node.opacity:o.highlightOpacity:o.node.opacity}function z(e,t){var n,o=e.data,r=e.id,i=e.config;!function(e){e.nodes&&e.nodes.length||D.throwErr("Graph",y.INSUFFICIENT_DATA);for(var t=e.links.length,n=function(t){var n=e.links[t];e.nodes.find(function(e){return e.id===n.source})||D.throwErr("Graph","".concat(y.INVALID_LINKS,' - "').concat(n.source,'" is not a valid source node id')),e.nodes.find(function(e){return e.id===n.target})||D.throwErr("Graph","".concat(y.INVALID_LINKS,' - "').concat(n.target,'" is not a valid target node id'))},o=0;o<t;o++)n(o)}(o);var a=o.nodes.map(function(e){return Object.assign({},e)}),s=o.links.map(function(e){return Object.assign({},e)});(n=t&&t.nodes&&t.links?{nodes:o.nodes.map(function(e){return t.nodes[e.id]?Object.assign({},e,D.pick(t.nodes[e.id],W)):Object.assign({},e)}),links:{}}:{nodes:o.nodes.map(function(e){return Object.assign({},e)}),links:{}}).links=o.links.map(function(e){return Object.assign({},e)});var u,l,f,h,g=Object.assign({},D.merge(p,i||{})),b=function(e){for(var t={},n=e.length,o=0;o<n;o++){var r=e[o];r.highlighted=!1,r.hasOwnProperty("x")||(r.x=0),r.hasOwnProperty("y")||(r.y=0),t[r.id.toString()]=r}return t}(n.nodes),m=n.links.reduce(function(e,t){var n=t.source.id||t.source,o=t.target.id||t.target;return e[n]||(e[n]={}),e[o]||(e[o]={}),e[n][o]=e[o][n]=t.value||1,e},{}),v=n,k=v.nodes,O=v.links;return{id:r.replace(/ /g,"_"),config:g,links:m,d3Links:O,linksInputSnapshot:s,nodes:b,d3Nodes:k,nodesInputSnapshot:a,highlightedNode:"",simulation:(u=g.width,l=g.height,f=Object(c.d)(u/2).strength(d.FORCE_X),h=Object(c.e)(l/2).strength(d.FORCE_Y),Object(c.c)().force("charge",Object(c.b)().strength(d.FORCE_IDEAL_STRENGTH)).force("x",f).force("y",h)),newGraphElements:!1,configUpdated:!1,transform:1}}function B(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function F(e,t,n,o,i,a,s,c){return t.map(function(t){var u=t.source,l=t.target,f=u.id||u,h=l.id||l,p="".concat(f).concat(d.COORDS_SEPARATOR).concat(h),y=function(e,t,n,o,r,i,a,s){var c=e.source,u=e.target,l=t[c]&&t[c].x||0,f=t[c]&&t[c].y||0,h=t[u]&&t[u].x||0,p=t[u]&&t[u].y||0,y=!1;switch(o.highlightDegree){case 0:break;case 2:y=!0;break;default:y=c===i||u===i}var g=y&&t[c].highlighted&&t[u].highlighted,b=c===(a&&a.source)&&u===(a&&a.target),m=g||b,v=o.link.opacity;(i||a&&a.source)&&(v=m?o.link.opacity:o.highlightOpacity);var k=e.color||o.link.color;m&&(k=o.link.highlightColor===d.KEYWORDS.SAME?o.link.color:o.link.highlightColor);var O=o.link.strokeWidth*(1/s);return o.link.semanticStrokeWidth&&(O+=(n[c][u]||n[u][c]||1)*O/10),{source:c,target:u,x1:l,y1:f,x2:h,y2:p,strokeWidth:O,stroke:k,className:d.LINK_CLASS_NAME,opacity:v,onClickLink:r.onClickLink,onMouseOverLink:r.onMouseOverLink,onMouseOutLink:r.onMouseOutLink}}(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(t){B(e,t,n[t])})}return e}({},t,{source:"".concat(f),target:"".concat(h)}),e,n,o,i,"".concat(a),s,c);return r.a.createElement(O,Object.assign({key:p},y))})}function H(e,t,n,o,i,a,s,c){return Object.keys(e).map(function(u){var l;if(e[u].isMessage){l=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0,i=arguments.length>5?arguments[5]:void 0,a=e.highlighted||e.id===(r&&r.source)||e.id===(r&&r.target),s=G(e,o,r,t),c=t.node.strokeColor;a&&t.node.highlightStrokeColor!==d.KEYWORDS.SAME&&(c=t.node.highlightStrokeColor);var u=1/i,l=e.size||t.node.size,f=(a?t.node.highlightFontSize:t.node.fontSize)*u+l/100+1.5,h=a?t.node.highlightStrokeWidth:t.node.strokeWidth,p=e.svg||t.node.svg,y=e.fontColor||t.node.fontColor;return{className:d.NODE_CLASS_NAME,cursor:t.node.mouseCursor,cx:e&&e.x||"0",cy:e&&e.y||"0",fill:"#00FF1E",fontColor:y,fontSize:0,dx:f,fontWeight:a?t.node.highlightFontWeight:t.node.fontWeight,id:e.id,label:"",onClickNode:n.onClickNode,onMouseOverNode:n.onMouseOverNode,onMouseOut:n.onMouseOut,opacity:s,renderLabel:t.node.renderLabel,size:15*u,stroke:c,strokeWidth:h*u,svg:p,type:e.symbolType||t.node.symbolType}}(Object.assign({},e[u],{id:"".concat(u)}),n,{},o,i,a);var f=e[u].sig.substring(2,8);l.fill="#"+f,e[u].isDoubleSpend&&(l.size=18,l.stroke="#ff0000",l.strokeWidth=1)}else if(l=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0,i=arguments.length>5?arguments[5]:void 0,a=e.highlighted||e.id===(r&&r.source)||e.id===(r&&r.target),s=G(e,o,r,t),c=e.color||t.node.color;a&&t.node.highlightColor!==d.KEYWORDS.SAME&&(c=t.node.highlightColor);var u=t.node.strokeColor;a&&t.node.highlightStrokeColor!==d.KEYWORDS.SAME&&(u=t.node.highlightStrokeColor);var l=1/i,f=e.size||t.node.size,h=a?t.node.highlightFontSize:t.node.fontSize,p=h*l+f/100+1.5,y=a?t.node.highlightStrokeWidth:t.node.strokeWidth,g=e.svg||t.node.svg,b=e.gerbil,m=e.fontColor||t.node.fontColor;return{className:d.NODE_CLASS_NAME,cursor:t.node.mouseCursor,cx:e&&e.x||"0",cy:e&&e.y||"0",fill:c,fontColor:m,fontSize:h*l,dx:p,fontWeight:a?t.node.highlightFontWeight:t.node.fontWeight,gerbil:b,id:e.id,label:e[t.node.labelProperty]||e.id,onClickNode:n.onClickNode,onMouseOverNode:n.onMouseOverNode,onMouseOut:n.onMouseOut,opacity:s,renderLabel:t.node.renderLabel,size:f*l,stroke:u,strokeWidth:y*l,svg:g,type:e.symbolType||t.node.symbolType}}(Object.assign({},e[u],{id:"".concat(u)}),n,t,o,i,a),s){var h=s(u,Math.floor(c));l.fill=h.color}return r.a.createElement(P,Object.assign({key:u},l))})}function Y(e){return(Y="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function K(e,t){return(K=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function U(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Q(e,t){return!t||"object"!==Y(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Z(e){return(Z=Object.getPrototypeOf||function(e){return e.__proto__})(e)}var J=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Q(this,Z(t).apply(this,arguments))}var n,o,i;return n=t,(o=[{key:"render",value:function(){var e=this.props,t=e.doubleSpend,n=(e.spend,e.showState),o=e.hide,i=e.visibleState;return r.a.createElement("div",{id:"NodeControls"},r.a.createElement("button",{id:"doubleSpend",onClick:function(){t(),o()}},"Double Spend"),r.a.createElement("button",{id:"showState",onClick:function(){n(),o()}},i()?"Hide State":"Show State"))}}])&&U(n.prototype,o),i&&U(n,i),function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");K(e.prototype,t&&t.prototype),t&&K(e,t)}(t,e),t}(o.Component);function q(e){return(q="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function V(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function X(e,t){return(X=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function $(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function ee(e,t){return!t||"object"!==q(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function te(e){return(te=Object.getPrototypeOf||function(e){return e.__proto__})(e)}var ne,oe={FORCE_LINK_STRENGTH:1,LINK_IDEAL_DISTANCE:100,SIMULATION_ALPHA_TARGET:.05};function re(e,t){return Object.keys(e).find(function(n){return e[n]===t})}var ie=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=ee(this,te(t).call(this,e)))._onDragEnd=function(){!n.state.config.staticGraph&&n.state.config.automaticRearrangeAfterDropNode&&n.state.simulation.alphaTarget(oe.SIMULATION_ALPHA_TARGET).restart(),ne<10&&Object(u.f)(window).on("click.drag",null)},n._onDragMove=function(e,t,o){var r=o[t].id;if(!n.state.config.staticGraph){var i=n.state.nodes[r];i.x+=u.b.dx,i.y+=u.b.dy,i.fx=i.x,i.fy=i.y,n._tick(),n.animate()}ne+=u.b.dx*u.b.dx+u.b.dy*u.b.dy},n._onDragStart=function(){n.pauseSimulation(),ne=0},n._setNodeHighlightedValue=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return n._tick(function(e,t,n,o){var r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=r?o:"",a=Object.assign({},e[o],{highlighted:r}),s=Object.assign({},e,I({},o,a));return t[o]&&0!==n.highlightDegree&&(s=Object.keys(t[o]).reduce(function(e,t){var n=Object.assign({},s[t],{highlighted:r});return Object.assign(e,I({},t,n))},s)),{nodes:s,highlightedNode:i}}(n.state.nodes,n.state.links,n.state.config,e,t))},n._tick=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n.setState(e)},n._zoomConfig=function(){return Object(u.f)("#".concat(n.state.id,"-").concat(d.GRAPH_WRAPPER_ID)).call(Object(l.a)().scaleExtent([n.state.config.minZoom,n.state.config.maxZoom]).on("zoom",n._zoomed))},n._zoomed=function(){var e=u.b.transform;Object(u.g)("#".concat(n.state.id,"-").concat(d.GRAPH_CONTAINER_ID)).attr("transform",e),n.state.config.panAndZoom&&n.setState({transform:e.k})},n.onMouseOverNode=function(e){},n.onMouseOutNode=function(e){n.props.onMouseOutNode&&n.props.onMouseOutNode(e),n.state.config.nodeHighlightBehavior&&n._setNodeHighlightedValue(e,!1)},n.onMouseOverLink=function(e,t){n.props.onMouseOverLink&&n.props.onMouseOverLink(e,t),n.state.config.linkHighlightBehavior&&(n.setState({highlightedLink:{source:e,target:t}}),n._tick())},n.onMouseOutLink=function(e,t){n.props.onMouseOutLink&&n.props.onMouseOutLink(e,t),n.state.config.linkHighlightBehavior&&(n.setState({highlightedLink:void 0}),n._tick())},n.pauseSimulation=function(){return n.state.simulation.stop()},n.resetNodesPositions=function(){if(!n.state.config.staticGraph){for(var e in n.state.nodes){var t=n.state.nodes[e];t.fx&&t.fy&&(Reflect.deleteProperty(t,"fx"),Reflect.deleteProperty(t,"fy"))}n.state.simulation.alphaTarget(oe.SIMULATION_ALPHA_TARGET).restart(),n._tick()}},n.restartSimulation=function(){return!n.state.config.staticGraph&&n.state.simulation.restart()},n.props.id||D.throwErr(n.constructor.name,y.GRAPH_NO_ID_PROP),n.state=z(n.props,n.state),n.state.time=0,n.state.paused=!1,n}var n,o,i;return n=t,(o=[{key:"componentWillReceiveProps",value:function(e){var t=e.data.nodes.length!==this.state.nodesInputSnapshot.length||e.data.links.length!==this.state.linksInputSnapshot.length||!D.isDeepEqual(e.data,{nodes:this.state.nodesInputSnapshot,links:this.state.linksInputSnapshot}),n=!D.isObjectEmpty(e.config)&&!D.isDeepEqual(e.config,this.state.config),o=t?z(e,this.state):this.state,r=n?D.merge(p,e.config||{}):this.state.config;t&&this.pauseSimulation();var i=e.config.panAndZoom!==this.state.config.panAndZoom?1:this.state.transform;this.setState(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(t){V(e,t,n[t])})}return e}({},o,{config:r,newGraphElements:t,configUpdated:n,transform:i})),e.messages&&this.setState({messages:e.messages}),e.speed&&this.setState({speed:e.speed}),e.nodeState&&this.setState({nodeState:e.nodeState});var a=this.state.paused;this.setState({paused:e.paused},function(){a&&!e.paused&&this.tick()})}},{key:"onClickNode",value:function(e){if(this.state.clickedNode&&this.state.clickedNode.id===e)this.setState({clickedNode:null});else{var t=this.state.nodes[e];this.setState({clickedNode:t})}}},{key:"componentDidUpdate",value:function(){this.state.config.staticGraph&&this.pauseSimulation(),!this.state.config.staticGraph&&this.state.newGraphElements&&(this._graphForcesConfig(),this.restartSimulation(),this.setState({newGraphElements:!1})),this.state.configUpdated&&(this._zoomConfig(),this.setState({configUpdated:!1}))}},{key:"componentDidMount",value:function(){this.state.config.staticGraph||this._graphForcesConfig(),this._zoomConfig(),this.tick=this.tick.bind(this),this.animate=this.animate.bind(this),this.getTick=this.props.onTick,this.start()}},{key:"componentWillUnmount",value:function(){this.pauseSimulation()}},{key:"start",value:function(){this.tick(),this.getTick(0)}},{key:"tick",value:function(){if(this.state.paused)console.log("paused!");else{var e=this.state.time,t=this.state.time+.1;this.animate(),Math.floor(t)-Math.floor(e)===1&&this.getTick(Math.floor(t)),this.animate(),this.setState({time:t}),requestAnimationFrame(this.tick)}}},{key:"step",value:function(e){var t=this.state.messages,n=this.state.nodes;console.log(n);for(var o=0;o<t.length;o++){var r=re(n,t[o].node);console.log("to delete:",r),delete n[r]}console.log(n),this.animate(),this.setState({time:e},function(){console.log("SET TIME TO",this.state.time),this.getTick(e),this.animate()})}},{key:"animate",value:function(){var e=this.state.messages;if(e){for(var t=0;t<e.length;t++){var n=this.state.nodes;if(!e[t].key&&(e[t].key=e[t].message.sig+e[t].sender+e[t].recipient.pid+e[t].rcvTime,!e[t].node))if(n[e[t].key])e[t].node=n[e[t].key];else{var o=new P;o.isMessage=!0,o.isDoubleSpend=e[t].message.isDoubleSpend,o.sig=e[t].message.sig,e[t].node=o,n[e[t].key]=o}var r=e[t].node,i=(this.state.time-e[t].sentTime)/(e[t].recvTime-e[t].sentTime);if(i<=1&&i>=0){var a=n[e[t].sender],s=n[e[t].recipient.pid];r.x=a.x,r.y=a.y,r.x=s.x,r.y=s.y,r.x=i*(s.x-a.x)+a.x,r.y=i*(s.y-a.y)+a.y}else i>1&&(delete n[e[t].key],e.splice(t,1))}this.setState({messages:e})}}},{key:"render",value:function(){var e=this.props,t=e.showState,n=e.doubleSpend,o=e.spend,i=e.deselectNode,a=e.clickedNode,s=e.visibleState,c=function(e,t,n,o,r,i,a,s,c,u,l){return{nodes:H(e,t,i,a,s,c,u,l),links:F(e,n,o,i,r,a,s,c)}}(this.state.nodes,{onClickNode:this.props.onClickNode,onMouseOverNode:this.onMouseOverNode,onMouseOut:this.onMouseOutNode},this.state.d3Links,this.state.links,{onClickLink:this.props.onClickLink,onMouseOverLink:this.onMouseOverLink,onMouseOutLink:this.onMouseOutLink},this.state.config,this.state.highlightedNode,this.state.highlightedLink,this.state.transform,this.state.nodeState,this.state.time),u=c.nodes,l=c.links,f="";a&&(f=r.a.createElement("foreignObject",{x:this.state.nodes[a.pid].x,y:this.state.nodes[a.pid].y},r.a.createElement(J,{doubleSpend:function(){return n(a)},showState:function(){return t(a)},spend:function(){return o(a)},hide:i,visibleState:function(){return s(a)}})));return r.a.createElement("div",{id:"".concat(this.state.id,"-").concat(d.GRAPH_WRAPPER_ID)},r.a.createElement("svg",{style:{maxHeight:"100%",maxWidth:"100%",viewBox:"0 0 1000 1000",preserveAspectRatio:"xMaxYMax"}},r.a.createElement("g",{id:"".concat(this.state.id,"-").concat(d.GRAPH_CONTAINER_ID)},l,u,f)))}},{key:"_graphForcesConfig",value:function(){this.state.simulation.nodes(this.state.d3Nodes).on("tick",this._tick);var e=Object(c.a)(this.state.d3Links).id(function(e){return e.id}).distance(oe.LINK_IDEAL_DISTANCE).strength(oe.FORCE_LINK_STRENGTH);this.state.simulation.force(d.LINK_CLASS_NAME,e);var t=Object(s.a)().on("start",this._onDragStart).on("drag",this._onDragMove).on("end",this._onDragEnd);Object(u.f)("#".concat(this.state.id,"-").concat(d.GRAPH_WRAPPER_ID)).selectAll(".node").call(t)}}])&&$(n.prototype,o),i&&$(n,i),function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");X(e.prototype,t&&t.prototype),t&&X(e,t)}(t,e),t}(r.a.Component),ae=n(15),se=n(209);n(219);function ce(e){return(ce="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ue(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function le(e,t){return(le=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function fe(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function he(e,t){return!t||"object"!==ce(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function de(e){return(de=Object.getPrototypeOf||function(e){return e.__proto__})(e)}var pe=[{title:"Address",dataIndex:"address",key:"address",width:200},{title:"Balance",dataIndex:"balance",key:"balance",width:100},{title:"Nonce",dataIndex:"nonce",key:"nonce",width:50}];o.Component;function ye(e){return(ye="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ge(e,t){return(ge=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function be(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function me(e,t){return!t||"object"!==ye(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ve(e){return(ve=Object.getPrototypeOf||function(e){return e.__proto__})(e)}var ke=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),me(this,ve(t).apply(this,arguments))}var n,o,i;return n=t,(o=[{key:"render",value:function(){var e=this.props,t=e.paused,n=e.onPause,o=e.onPauseTxs,i=e.pausedTxs;e.doubleSpend,e.clickedNode;return r.a.createElement("div",{id:"Controls"},r.a.createElement("button",{onClick:n},t?"Resume":"Pause"),r.a.createElement("button",{onClick:o},i?"Resume Txs":"Pause Txs"))}}])&&be(n.prototype,o),i&&be(n,i),function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");ge(e.prototype,t&&t.prototype),t&&ge(e,t)}(t,e),t}(o.Component);function Oe(e){return(Oe="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Se(e,t){return(Se=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function we(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Ee(e,t){return!t||"object"!==Oe(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _e(e){return(_e=Object.getPrototypeOf||function(e){return e.__proto__})(e)}var Ne=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ee(this,_e(t).apply(this,arguments))}var n,o,i;return n=t,(o=[{key:"render",value:function(){var e=this.props,t=e.node,n=e.icons,o=Object.keys(t.state).map(function(e,n){return r.a.createElement("tr",{key:n},r.a.createElement("td",null,e.substring(0,5)),r.a.createElement("td",null,t.state[e].balance),r.a.createElement("td",null,t.state[e].nonce))}),i=[];Object.keys(t.invalidNonceTxs).forEach(function(e,n){Object.keys(t.invalidNonceTxs[e]).forEach(function(n,o){var r=t.invalidNonceTxs[e][n];i.push(r.contents)})});var a=i.map(function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,e.from.substring(0,5)),r.a.createElement("td",null,e.to.substring(0,5)),r.a.createElement("td",null,e.amount),r.a.createElement("td",null,e.nonce))}),s=r.a.createElement("div",{style:i.length?{}:{display:"none"}},r.a.createElement("a",null,"Invalid Nonce Transactions"),r.a.createElement("table",null,r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",null,"From"),r.a.createElement("th",null,"To"),r.a.createElement("th",null,"Amount"),r.a.createElement("th",null,"Nonce")),a))),c=Number.parseInt(t.color.slice(1),16),u="white";return(.299*(c>>16&255)+.587*(c>>8&255)+.114*(255&c))/255>.5&&(u="black"),r.a.createElement("div",{className:"Ledger",id:"ledger-"+t.pid,style:{backgroundColor:t.color,color:u}},r.a.createElement("img",{src:n[t.pid],width:"30"}),r.a.createElement("span",{className:"ledger-title"}," "+t.pid.substring(0,5)),r.a.createElement("table",null,r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Address"),r.a.createElement("th",null,"Balance"),r.a.createElement("th",null,"Nonce"),r.a.createElement("th",null,"            ")),o)),s)}}])&&we(n.prototype,o),i&&we(n,i),function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");Se(e.prototype,t&&t.prototype),t&&Se(e,t)}(t,e),t}(o.Component);function Te(e){return(Te="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function je(e,t){return(je=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ce(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function xe(e,t){return!t||"object"!==Te(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Pe(e){return(Pe=Object.getPrototypeOf||function(e){return e.__proto__})(e)}var Me=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),xe(this,Pe(t).apply(this,arguments))}var n,o,i;return n=t,(o=[{key:"render",value:function(){var e=this.props,t=e.nodes,n=e.icons;return r.a.createElement("div",{id:"Ledgers"},Object.keys(t).map(function(e,o){return r.a.createElement(Ne,{key:e,node:t[e],icons:n})}))}}])&&Ce(n.prototype,o),i&&Ce(n,i),function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");je(e.prototype,t&&t.prototype),t&&je(e,t)}(t,e),t}(o.Component),Le=n(211),Ae=n.n(Le);function Re(e){return(Re="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function De(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(t){Ie(e,t,n[t])})}return e}function Ie(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function We(e,t){return(We=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ge(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function ze(e,t){return!t||"object"!==Re(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Be(e){return(Be=Object.getPrototypeOf||function(e){return e.__proto__})(e)}for(var Fe=["https://i.imgur.com/Wi9yFXw.png","https://i.imgur.com/BBUyb4e.png","https://i.imgur.com/NPH4rqg.png","https://i.imgur.com/MptO0GC.png","https://i.imgur.com/yHwPVBF.png","https://i.imgur.com/yvv1MMb.png","https://i.imgur.com/I4Dlkik.png","https://i.imgur.com/jNB8LS6.png"],He={nodes:[],links:[]},Ye={},Ke=0;Ke<ae.nodes.length;Ke++)He.nodes.push({id:ae.nodes[Ke].pid,name:ae.nodes[Ke].pid.slice(0,5),gerbil:Fe[Ke]}),Ye[ae.nodes[Ke].pid]=Fe[Ke];var Ue=!0,Qe=!1,Ze=void 0;try{for(var Je,qe=ae.nodes[Symbol.iterator]();!(Ue=(Je=qe.next()).done);Ue=!0){var Ve=Je.value,Xe=!0,$e=!1,et=void 0;try{for(var tt,nt=ae.network.peers[Ve.pid][Symbol.iterator]();!(Xe=(tt=nt.next()).done);Xe=!0){var ot=tt.value;He.links.push({source:Ve.pid,target:ot.pid})}}catch(y){$e=!0,et=y}finally{try{Xe||null==nt.return||nt.return()}finally{if($e)throw et}}}}catch(y){Qe=!0,Ze=y}finally{try{Ue||null==qe.return||qe.return()}finally{if(Qe)throw Ze}}var rt={automaticRearrangeAfterDropNode:!0,staticGraph:!1,nodeHighlightBehavior:!0,node:{size:400,highlightStrokeColor:"blue",labelProperty:"name"},link:{highlightColor:"lightblue"}},it=function(e,t){window.alert("Clicked link between ".concat(e," and ").concat(t))},at=function(e,t){},st=function(e,t){},ct=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=ze(this,Be(t).call(this))).state={clickedNode:null,selectedNodes:{},history:[],paused:!1,pausedTxs:!0,speed:10},e}var n,o,i;return n=t,(o=[{key:"componentDidMount",value:function(){var e=!0,t=!1,n=void 0;try{for(var o,r=ae.nodes[Symbol.iterator]();!(e=(o=r.next()).done);e=!0){var i=o.value;this.showState(i)}}catch(e){t=!0,n=e}finally{try{e||null==r.return||r.return()}finally{if(t)throw n}}}},{key:"setMessageQueue",value:function(e){var t=e.messageQueue,n=[];return Object.keys(t).forEach(function(e,o){var r=!0,i=!1,a=void 0;try{for(var s,c=t[e][Symbol.iterator]();!(r=(s=c.next()).done);r=!0){var u=s.value;n.push(De({},u,{rcvTime:e}))}}catch(e){i=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(i)throw a}}}),n}},{key:"tick",value:function(){ae.network.tick();var e=this.state.history;e.push(Ae()(ae.network)),this.setState({history:e})}},{key:"getTick",value:function(e){var t=this.state,n=t.history,o=t.selectedNodes,r=t.clickedNode;if(e>n.length)throw new Error("You skipped a time step!");e===n.length&&this.tick();var i=this.setMessageQueue(n[e]);if(r){var a=this.getNode(r.pid,e);this.setState({clickedNode:a,isNodeClicked:!0})}for(var s in o)o[s]=this.getNode(s,e);this.setState({selectedNodes:o,messages:i,time:e})}},{key:"getNode",value:function(e,t){var n=this.state.history[t];if(n)return n.agents.find(function(t){return t.pid===e})}},{key:"onClickNode",value:function(e){var t=this.state,n=t.clickedNode,o=t.time,r=this.getNode(e,o);n&&r.pid===n.pid?this.setState({clickedNode:null,isNodeClicked:!1}):this.setState({clickedNode:r,isNodeClicked:!0})}},{key:"onMouseOverNode",value:function(e){}},{key:"onMouseOutNode",value:function(e){}},{key:"pause",value:function(){this.setState({paused:!this.state.paused})}},{key:"pauseTxs",value:function(){this.setState({pausedTxs:!this.state.pausedTxs});var e=!0,t=!1,n=void 0;try{for(var o,r=ae.nodes[Symbol.iterator]();!(e=(o=r.next()).done);e=!0){var i=o.value;i.pausedSpending=!i.pausedSpending}}catch(e){t=!0,n=e}finally{try{e||null==r.return||r.return()}finally{if(t)throw n}}}},{key:"rewind",value:function(){var e=this.state.speed;1.5*e>10||(this.setState({speed:e*=1.5}),console.log("rewind",e))}},{key:"fastforward",value:function(){var e=this.state.speed;e/1.5<.005||(this.setState({speed:e/=1.5}),console.log("fastforward",e))}},{key:"stepbackward",value:function(){console.log("stepbackward");var e=this.state.time;e<1||(this.setState({paused:!0}),this.graph.step(e-1),this.getTick(e-1),this.graph.animate())}},{key:"stepforward",value:function(){console.log("stepforward");var e=this.state.time;this.setState({paused:!0}),this.graph.step(e+1),this.getTick(e+1),this.graph.animate()}},{key:"doubleSpend",value:function(e){var t=e.pid,n=[ae.network.peers[t][0],ae.network.peers[t][1]],o=[e.generateTx(n[0].wallet.address,10),e.generateTx(n[1].wallet.address,10)];o[0].isDoubleSpend=!0,o[1].isDoubleSpend=!0,ae.network.broadcastTo(t,n[0],o[0]),ae.network.broadcastTo(t,n[1],o[1]),console.log("Double spender:",t,"victims:",n,"spends:",o)}},{key:"spend",value:function(e){var t=e.generateTx(e.getRandomReceiver(),10);e.transactions.push(t),e.applyTransaction(t),ae.network.broadcast(e.pid,t)}},{key:"showState",value:function(e){var t=this.state.selectedNodes;t[e.pid]?delete t[e.pid]:t[e.pid]=e}},{key:"visibleState",value:function(e){return!!this.state.selectedNodes[e.pid]}},{key:"deselectNode",value:function(){this.setState({clickedNode:null})}},{key:"reset",value:function(){console.log("reset"),this.getTick(0)}},{key:"setSpeed",value:function(e){var t=e/1e3;this.setState({speed:t}),console.log("speeedooo",t)}},{key:"setLatency",value:function(e){var t=e.target.value,n=Math.min(Math.max(parseInt(t),1),10);console.log("latency",t,n)}},{key:"setPacketLoss",value:function(e){var t=e.target.value,n=Math.min(Math.max(parseInt(t),1),20);console.log("packetloss",t,n)}},{key:"render",value:function(){var e=this,t=this.state,n=t.clickedNode,o=t.selectedNodes,i=t.messages,a=t.time,s=t.paused,c=t.pausedTxs,u=t.speed;return r.a.createElement("div",{id:"App-container"},r.a.createElement("div",{id:"Text-container"},r.a.createElement("div",{id:"Overflow-top"}),r.a.createElement("h3",null,"2.2: The Double Spend"),r.a.createElement("div",{id:"Text"},"Building a centralized payments processor like Paypal is simple, but relies on trust that Paypal will not break the rules. A simple way to decentralize PayPal is to make clients download all transactions and run the PayPal code to generate their belief of the current state. ",r.a.createElement("br",null),r.a.createElement("br",null),"In a decentralized system, we cannot rely on a global clock, and we cannot assume a constant latency for all messages to be delivered.",r.a.createElement("br",null),r.a.createElement("br",null),"This is the root cause of the double spend problem: an attacker can send one message to Jing & another message to Karl each spending the same coins. If Jing and Karl both accept those transactions, their states will diverge and we will have a fork. Not good! We need decentralized consensus!"),r.a.createElement("div",{id:"Overflow-bottom"})),r.a.createElement("div",{id:"Network-container"},r.a.createElement("div",{id:"Graph-container"},r.a.createElement(Me,{nodes:o,icons:Ye}),r.a.createElement(ie,{ref:function(t){e.graph=t},id:"graph-id",data:He,config:rt,onClickNode:this.onClickNode.bind(this),clickedNode:n,onClickLink:it,onMouseOverNode:this.onMouseOverNode.bind(this),onMouseOutNode:this.onMouseOutNode.bind(this),onMouseOverLink:at,onMouseOutLink:st,doubleSpend:this.doubleSpend.bind(this),spend:this.spend.bind(this),showState:this.showState.bind(this),deselectNode:this.deselectNode.bind(this),visibleState:this.visibleState.bind(this),messages:i,time:a,speed:u,paused:s,onTick:this.getTick.bind(this),nodeState:this.getNode.bind(this)})),r.a.createElement("div",{id:"Input-container"},r.a.createElement("div",{id:"Controls-container"},r.a.createElement(ke,{onPause:this.pause.bind(this),onPauseTxs:this.pauseTxs.bind(this),paused:s,pausedTxs:c,clickedNode:n,stepbackward:this.stepbackward.bind(this),stepforward:this.stepforward.bind(this),rewind:this.rewind.bind(this),fastforward:this.fastforward.bind(this),reset:this.reset.bind(this)})))))}}])&&Ge(n.prototype,o),i&&Ge(n,i),function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");We(e.prototype,t&&t.prototype),t&&We(e,t)}(t,e),t}(o.Component);function ut(e){return(ut="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lt(e,t){return(lt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ft(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function ht(e,t){return!t||"object"!==ut(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function dt(e){return(dt=Object.getPrototypeOf||function(e){return e.__proto__})(e)}var pt=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ht(this,dt(t).apply(this,arguments))}var n,o,i;return n=t,(o=[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement("h1",{className:"App-title"},"Visualizing Consensus")),r.a.createElement(ct,null))}}])&&ft(n.prototype,o),i&&ft(n,i),function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");lt(e.prototype,t&&t.prototype),t&&lt(e,t)}(t,e),t}(o.Component),yt=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function gt(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}a.a.render(r.a.createElement(pt,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/code",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("/code","/service-worker.js");yt?(function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):gt(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):gt(e)})}}()},349:function(e,t,n){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var r=n(135);function i(e){return r.hash.keccak256(JSON.stringify(e))}function a(e){return"#"+r.hash.keccak256(JSON.stringify(e)).substr(-6)}var s=function(){function e(t,n,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.wallet=t,this.pid=t.address,this.network=o,this.state=n,this.color=a(n),this.transactions=[],this.invalidNonceTxs={}}var t,n,s;return t=e,(n=[{key:"onReceive",value:function(e){this.transactions.includes(e)||(this.transactions.push(e),this.applyTransaction(e),this.network.broadcast(this.pid,e),this.applyInvalidNonceTxs(e.contents.from))}},{key:"applyInvalidNonceTxs",value:function(e){var t=this.state[e].nonce;e in this.invalidNonceTxs&&t in this.invalidNonceTxs[e]&&(this.applyTransaction(this.invalidNonceTxs[e][t]),delete this.invalidNonceTxs[e][t],this.applyInvalidNonceTxs(e))}},{key:"tick",value:function(){}},{key:"generateTx",value:function(e,t){var n={type:"send",amount:t,from:this.wallet.address,to:e,nonce:this.state[this.wallet.address].nonce};return{contents:n,sig:r.sign(this.wallet.privateKey,i(n))}}},{key:"applyTransaction",value:function(e){if(r.recover(e.sig,i(e.contents))!==e.contents.from)throw new Error("Invalid signature!");if(e.contents.to in this.state||(this.state[[e.contents.to]]={balance:0,nonce:0}),e.contents.nonce!==this.state[[e.contents.from]].nonce)return e.contents.from in this.invalidNonceTxs||(this.invalidNonceTxs[e.contents.from]={}),void(this.invalidNonceTxs[e.contents.from][e.contents.nonce]=e);if("send"!==e.contents.type)throw new Error("Invalid transaction type!");if(this.state[[e.contents.from]].balance-e.contents.amount<0)throw new Error("Not enough money!");this.state[[e.contents.from]].balance-=e.contents.amount,this.state[[e.contents.to]].balance+=e.contents.amount,this.state[[e.contents.from]].nonce+=1,this.color=a(this.state)}}])&&o(t.prototype,n),s&&o(t,s),e}();e.exports={Node:s,getTxHash:i}},350:function(e,t){},360:function(e,t,n){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var r=n(359),i=n(217),a=n(358),s=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var o=i.randomNormal.source(a("a22ebc7c488a3a47"))(t,2*t/5);this.agents=[],this.latencyDistribution=function(){return Math.floor(Math.max(o(),0))},this.time=0,this.messageQueue={},this.peers={},this.packetLoss=n}var t,n,s;return t=e,(n=[{key:"connectPeer",value:function(e,t){e.network=this;var n=r.shuffle(this.agents);this.agents.push(e),this.peers[e.pid]=[];var o=!0,i=!1,a=void 0;try{for(var s,c=n.slice(0,t)[Symbol.iterator]();!(o=(s=c.next()).done);o=!0){var u=s.value;this.peers[e.pid].push(u),this.peers[u.pid].push(e)}}catch(e){i=!0,a=e}finally{try{o||null==c.return||c.return()}finally{if(i)throw a}}}},{key:"broadcast",value:function(e,t){var n=!0,o=!1,r=void 0;try{for(var i,a=this.peers[e][Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var s=i.value;this.broadcastTo(e,s,t)}}catch(e){o=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(o)throw r}}}},{key:"broadcastTo",value:function(e,t,n){var o=this.time+this.latencyDistribution();o in this.messageQueue||(this.messageQueue[o]=[]),this.messageQueue[o].push({sender:e,sentTime:this.time,recipient:t,recvTime:o,message:n})}},{key:"tick",value:function(){if(this.time in this.messageQueue){var e=!0,t=!1,n=void 0;try{for(var o,r=this.messageQueue[this.time][Symbol.iterator]();!(e=(o=r.next()).done);e=!0){var i=o.value,a=i.recipient,s=i.message;Math.random()>this.packetLoss&&a.onReceive(s)}}catch(e){t=!0,n=e}finally{try{e||null==r.return||r.return()}finally{if(t)throw n}}delete this.messageQueue.time}var c=!0,u=!1,l=void 0;try{for(var f,h=this.agents[Symbol.iterator]();!(c=(f=h.next()).done);c=!0){f.value.tick()}}catch(e){u=!0,l=e}finally{try{c||null==h.return||h.return()}finally{if(u)throw l}}this.time+=1}},{key:"run",value:function(e){for(var t=0;t<e;t++)this.tick()}}])&&o(t.prototype,n),s&&o(t,s),e}();e.exports=s},440:function(e,t){},443:function(e,t){},464:function(e,t){},466:function(e,t){},472:function(e,t,n){},473:function(e,t,n){},487:function(e,t,n){n(486),e.exports=n(218)}},[[487,0,1]]]);
//# sourceMappingURL=main.b97c8e65.chunk.js.map